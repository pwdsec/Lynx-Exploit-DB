# Cloudscript scraper
# Date: 4/12/2021
# made by: pwd0kernel - pwdsec
# Profile: https://github.com/pwd0kernel
# Organization: https://github.com/pwdsec
# 
# Website: http://lynx.rip/
# Script Storage: http://lynx.rip/dashboard/home/cloudscripts/storage/
# Description: Gets the cloudscript source and decode it and show the source.

import requests, base64

def remove_cloudscript(data):
    if "cloudscript" not in data:
        return data
    else:
        data = data.replace("cloudscript", "")
        data = data.replace("(", "")
        data = data.replace(")", "")
        return data

def cloudscript_request(code):
    code = remove_cloudscript(code)
    cloud = requests.get("http://lynx.rip/dashboard/home/cloudscripts/storage/" + code + "_src.lua", verify=False)
    if cloud.status_code == 200:
        source = base64.b64decode(cloud.content).decode('utf-8')
        print(source)
        sourcefile = open(code + ".txt", "w")
        sourcefile.write(source)
        sourcefile.close
    else:
        print("There was an error while doing the request: code: " + str(cloud.status_code))

code = input()
cloudscript_request(code)