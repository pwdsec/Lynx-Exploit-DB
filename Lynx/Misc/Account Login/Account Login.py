import requests
import warnings
from bs4 import BeautifulSoup

warnings.filterwarnings("ignore")

commands = [
"   AccountInfo - Will show the information of your account.",
"   ChangeBio - Will change your account bio on the website.",
"   UploadScript - Will upload your script to \"Cloudscript\"",
"   GetLynxAddys - Will get the addresses of Lynx that it uses in the exploit."
"   GetLynxLatestVersion - Will show you the lastest version number.",
"   DownloadLynx - Will download Lynx.",
"\n"]

data = [] # Account data

def Get_Account_name(phpid):
    global lynx_cookies
    session = requests.Session()
    account = session.get("https://lynx.rip/dashboard/home/", cookies=dict(PHPSESSID=phpid), verify=False)
    lynx_cookies = session.cookies.get_dict()
    soup = BeautifulSoup(account.text, "html.parser")
    for username in soup.find_all("div", {"class": "font-weight-bold font-size-h5 text-light"}):
        if account.status_code == 200:
            if len(username.text) != 0 and len(username.text) <= 20:
                data.append(username.text)
            else:
                print("There was an error login into your account.")
                exit()
        else:
            print("There was an error requesting the website. code: ", str(account.status_code))

def Account_info():
    # not done
    pass

def Change_bio(bio_text): 
    # Original function on the website is broken
    # hopefully this one works | EDIT: it does work
    bio_data = {
        'bio': bio_text
    }
    bio = requests.post("https://lynx.rip/dashboard/home/profile/", data=bio_data, cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"]
    , username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
    if bio.status_code == 200:
        print("Bio as been changed")
    else:
        print("There was an error.")

def Upload_script():
    # not done
    pass

def Get_lynx_addys():
    # not done
    pass

def Get_lynx_latest_version():
    # not done
    pass

def download_lynx():
    # not done
    pass

phpid = input("[PHPSESSID]: ") # jda33thhn0s4s9skac2n6f8pb9
Get_Account_name(phpid)
print("Logged in as:", data[0])
print("Commands: ")

# print the command list.
for i in commands:
    print(i)

while True:
    cmd = input("[Command]: ")
    if cmd == "AccountInfo":
        pass
    elif cmd == "ChangeBio":
        bio = input("[Bio Description]: ")
        Change_bio(bio)
    elif cmd == "UploadScript":
        pass
    elif cmd == "GetLynxAddys":
        pass
    elif cmd == "GetLynxLatestVersion":
        pass
    elif cmd == "DownloadLynx":
        pass
# Change_bio("test")
