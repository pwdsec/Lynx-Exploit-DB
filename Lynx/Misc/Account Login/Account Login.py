# Title: Account Login
# Date: 4/15/2021
# Made by: pwd0kernel - pwdsec
# Profile: https://github.com/pwd0kernel
# Organization: https://github.com/pwdsec
# Description: just a tool because i was bored but
# atleast change bio works on this since its broken on the website.

import requests
import warnings
from os import  system
from bs4 import BeautifulSoup

warnings.filterwarnings("ignore")

commands = [
"   AccountInfo - Will show the information of your account.",
"   ChangeBio - Will change your account bio on the website.",
"   UploadScript - Will upload your script to \"Cloudscript\"",
"   GetLynxAddys - Will get the addresses of Lynx that it uses in the exploit.",
"   GetLynxLatestVersion - Will show you the lastest version number.",
"   DownloadLynx - Will download Lynx.",
"   Clear - Will clear the console.",
"   Exit - Will exit the program.",
]

data = [] # Account data

def Get_Account_name(phpid):
    # fully done
    global lynx_cookies
    lynx_session = requests.Session()
    account = lynx_session.get("https://lynx.rip/dashboard/home/", cookies=dict(PHPSESSID=phpid), verify=False)
    lynx_cookies = lynx_session.cookies.get_dict()
    soup = BeautifulSoup(account.text, "html.parser")
    for username in soup.find_all("div", {"class": "font-weight-bold font-size-h5 text-light"}):
        if account.status_code == 200:
            if len(username.text) != 0 and len(username.text) <= 20:
                data.append(username.text)
            else:
                print("There was an error login into your account.")
                exit()
        else:
            print("There was an error requesting the website. code: ", str(account.status_code))

def Change_bio(bio_text): 
    # fully done
    # Original function on the website is broken
    # hopefully this one works | EDIT: it does work
    bio = requests.post("https://lynx.rip/dashboard/home/profile/", data={'bio': bio_text}, cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
    username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
    if bio.status_code == 200:
        check = requests.get("https://lynx.rip/dashboard/home/profile/", cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
        username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
        if check.status_code == 200:
            soup = BeautifulSoup(check.text, "html.parser")
            if len(soup.findAll("span")[14].text) == len(bio_text):
                print("It was changed successfully.")
            else:
                print("There was an error while changing bio.")
        else:
            print("There was an error while sending the request. code:", str(check.status_code))
    else:
        print("There was an error while sending the request. code:", str(bio.status_code))

def Get_Account_bio():
    # not done
    bio = requests.get("https://lynx.rip/dashboard/home/profile/", cookies=dict(PHPSESSID=phpid, did=lynx_cookies["did"],
    username=lynx_cookies["username"], avatar=lynx_cookies["avatar"]), verify=False)
    if bio.status_code == 200:
        soup = BeautifulSoup(bio.text, "html.parser")
        if len(soup.findAll("span")[14].text) != 0:
            data.append(soup.findAll("span")[14].text)
        else:
            print("There was an error while getting your bio.")
    else:
        print("There was an error while sending the request. code:", str(bio.status_code))


def ClearConsole():
    # fully done
    system("cls")
    print("Logged in as:", data[0])
    print("Commands: ")
    for i in commands:
        print(i)

def Account_info():
    print("Account Information:")
    print("   Username:", data[0])
    print("   Bio:", data[1])
    print("   PHPSESSID:", phpid)
    print("   Avatar (Encrypted):", lynx_cookies["avatar"])
    print("   Did (Encrypted):", lynx_cookies["did"])
    print("   Username (Encrypted):", lynx_cookies["username"])
    pass

def Upload_script():
    # not done
    pass

def Get_lynx_addys():
    # not done
    pass

def Get_lynx_latest_version():
    # not done
    pass

def download_lynx():
    # not done
    pass

try:
    system("cls")
    phpid = input("[PHPSESSID]: ") # jda33thhn0s4s9skac2n6f8pb9
    if len(phpid) != 0:
        print("Logging in...")
        Get_Account_name(phpid)
        print("Getting Bio...")
        Get_Account_bio()
        system("cls")
        print("Logged in as:", data[0])
        print("Commands: ")

        # print the command list.
        for i in commands:
            print(i)

        try:
            while True:
                cmd = input("\n[Command]: ")
                if cmd == "AccountInfo":
                    Account_info()
                elif cmd == "ChangeBio":
                    bio = input("[Bio Description]: ")
                    Change_bio(bio)
                elif cmd == "UploadScript":
                    pass
                elif cmd == "GetLynxAddys":
                    pass
                elif cmd == "GetLynxLatestVersion":
                    pass
                elif cmd == "DownloadLynx":
                    pass
                elif cmd == "Clear":
                    ClearConsole()
                elif cmd == "Exit":
                    system("cls")
                    print("Thank you for using this!")
                    exit()
                else:
                    print("Command not found")
        except KeyboardInterrupt:
            system("cls")
            print("Thank you for using this!")
            exit()
    else:
        print("Please put a real PHPSESSID.")
except Exception:
    print("There was an error. try putting a valid PHPSESSID")